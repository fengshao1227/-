# 快速开始指南

## 🚀 启动GUI界面

### 方法1: 使用启动脚本（推荐）
```bash
./run_gui.sh
```

### 方法2: 直接运行Python
```bash
python start_gui.py
```

## 📝 使用步骤

### 1. 选择视频
- 点击左侧 **"📁 选择视频文件"** 按钮
- 选择你的课堂视频文件（支持MP4、AVI、MOV、MKV格式）

### 2. 调整参数（可选）
- **专注度阈值**: 默认50分，低于此分数判定为不专注
- **跳帧数**: 默认2，数值越大处理越快
- **最大帧数**: 默认0（处理全部），可设置用于快速测试

### 3. 开始检测
- 点击 **"▶️ 开始检测"** 按钮
- 观察进度条和状态信息
- 等待处理完成

### 4. 查看结果
- **🎬 视频预览** 标签页：在线播放标注后的视频
  - 点击播放/暂停按钮控制播放
  - 拖动进度条跳转到指定位置
  - 查看实时标注效果
- **📊 统计图表** 标签页：查看可视化统计数据
- **📋 详细报告** 标签页：查看文字报告

### 5. 导出结果
- 点击 **"📊 导出CSV报告"** 保存数据
- 点击 **"🎬 打开标注视频"** 用外部播放器查看

## ⚙️ 参数说明

### 专注度阈值
- **范围**: 0-100分
- **默认**: 50分
- **说明**: 分数越低，判定越严格
- **建议**: 
  - 严格模式: 40-45分
  - 正常模式: 50-55分
  - 宽松模式: 60-65分

### 跳帧数
- **范围**: 0-10
- **默认**: 2
- **说明**: 每处理1帧跳过N帧
- **建议**:
  - 精确分析: 0-1
  - 平衡模式: 2-3
  - 快速测试: 5-10

## 🎯 检测行为类型

系统会自动检测以下不专注行为：

1. **长时间低头** ⏱️ - 持续低头超过3秒
2. **闭眼/打瞌睡** 😴 - 持续闭眼超过2秒
3. **发呆** 🤔 - 头部静止超过4秒
4. **短暂低头** 📱 - 瞬间低头
5. **侧身** 🔄 - 肩膀倾斜角度过大
6. **手部异常** ✋ - 手部位置异常

## 📊 输出文件

处理完成后会生成以下文件：

1. **output_annotated.mp4** - 标注后的视频
   - 红框标记不专注学生
   - 显示学生ID和专注度分数
   - 显示检测到的行为类型
   - 可在GUI中直接预览播放

2. **attention_report.csv** - 详细数据报告
   - 每帧的检测结果
   - 学生ID、时间戳、行为类型
   - 专注度分数

## 🎬 视频播放器功能

内置视频播放器支持：
- ▶️ **播放/暂停** - 控制视频播放
- ⏹️ **停止** - 停止播放并回到开始
- 📊 **进度条** - 拖动跳转到任意位置
- ⏱️ **时间显示** - 显示当前时间和总时长
- 🔍 **自动缩放** - 视频自动适应窗口大小
- ⚡ **播放速度** - 支持0.5x、1x、1.5x、2x倍速播放
- 🎯 **跳帧播放** - 可选择跳帧以提高流畅度（推荐跳1-2帧）

### 播放优化建议

如果视频播放卡顿，可以尝试：
1. **调整跳帧**: 选择"跳2帧"或"跳3帧"
2. **提高速度**: 选择1.5x或2x播放速度
3. **组合使用**: 跳2帧 + 1.5x速度 = 流畅播放

## ❗ 常见问题

### Q: GUI无法启动？
**A**: 确保已安装所有依赖：
```bash
conda install -y -c conda-forge pyqt matplotlib pandas numpy opencv
```

### Q: 处理速度慢？
**A**: 
- 增加跳帧数（如设为5）
- 使用GPU加速（需要NVIDIA显卡）
- 降低视频分辨率

### Q: 检测不准确？
**A**:
- 调整专注度阈值
- 确保视频清晰度足够
- 检查光线条件

## 💡 使用技巧

1. **首次使用**: 建议先用小视频测试，熟悉参数设置
2. **批量处理**: 可以多次运行，处理不同视频
3. **结果对比**: 导出CSV后可用Excel进行数据分析
4. **视频回放**: 使用VLC播放器查看标注视频效果最佳

## 🎓 示例工作流程

```
1. 启动GUI → ./run_gui.sh
2. 选择视频 → 点击"选择视频文件"
3. 设置参数 → 阈值50，跳帧2
4. 开始检测 → 点击"开始检测"
5. 等待完成 → 观察进度条
6. 查看图表 → 切换到"统计图表"
7. 导出数据 → 点击"导出CSV报告"
8. 查看视频 → 点击"打开标注视频"
```

---

**祝使用愉快！** 🎉

