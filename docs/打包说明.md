# 应用程序打包说明

## 📦 打包方式对比

| 方式 | 优点 | 缺点 | 推荐度 |
|------|------|------|--------|
| **GitHub Actions** | 免费、自动化、支持多平台 | 需要GitHub账号 | ⭐⭐⭐⭐⭐ |
| **本地打包** | 简单直接 | 需要对应系统 | ⭐⭐⭐⭐ |
| **虚拟机** | 完全控制 | 占用资源大 | ⭐⭐⭐ |

---

## 方案1: GitHub Actions 自动打包（推荐）

### 优点
- ✅ 完全免费
- ✅ 自动化，无需手动操作
- ✅ 同时打包Windows和macOS版本
- ✅ 不需要Windows电脑

### 使用步骤

1. **将代码推送到GitHub**
   ```bash
   git init
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/你的用户名/classroom_attention.git
   git push -u origin main
   ```

2. **创建版本标签触发打包**
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

3. **或者手动触发**
   - 访问 GitHub 仓库页面
   - 点击 "Actions" 标签
   - 选择 "打包应用程序" workflow
   - 点击 "Run workflow"

4. **下载打包好的文件**
   - 等待打包完成（约5-10分钟）
   - 在 Actions 页面下载 `windows-exe` 和 `macos-app`

---

## 方案2: 本地打包

### Windows 打包（需要Windows系统）

1. **在Windows电脑上克隆代码**
   ```bash
   git clone https://github.com/你的用户名/classroom_attention.git
   cd classroom_attention
   ```

2. **运行打包脚本**
   ```bash
   build_windows.bat
   ```

3. **获取exe文件**
   - 位置: `dist\课堂专注度检测系统.exe`
   - 大小: 约200-300MB（包含所有依赖）

### macOS 打包（在你的Mac上）

1. **运行打包脚本**
   ```bash
   ./build_macos.sh
   ```

2. **获取app文件**
   - 位置: `dist/课堂专注度检测系统.app`
   - 可以拖到"应用程序"文件夹

---

## 方案3: 使用虚拟机

### 安装Windows虚拟机

1. **下载虚拟机软件**
   - Parallels Desktop（付费，推荐）
   - VirtualBox（免费）
   - VMware Fusion（付费）

2. **安装Windows系统**
   - 下载Windows 10/11 ISO
   - 创建虚拟机并安装

3. **在虚拟机中打包**
   - 安装Python 3.8+
   - 运行 `build_windows.bat`

---

## 方案4: 使用云服务器

### 租用Windows云服务器

1. **选择云服务商**
   - 阿里云
   - 腾讯云
   - AWS

2. **租用Windows服务器**
   - 按小时计费，打包完即可释放
   - 成本: 约2-5元/小时

3. **远程连接打包**
   - 使用远程桌面连接
   - 运行打包脚本

---

## ⚠️ 注意事项

### 打包前准备

1. **确保模型文件存在**
   ```bash
   # 检查模型文件
   ls -lh yolov8n-pose.pt
   ```

2. **测试GUI正常运行**
   ```bash
   ./run_gui.sh
   ```

3. **更新requirements.txt**
   ```bash
   pip freeze > requirements.txt
   ```

### 打包后测试

1. **Windows exe测试**
   - 双击运行
   - 检查是否能正常打开GUI
   - 测试视频处理功能

2. **macOS app测试**
   - 右键点击 -> 打开（首次运行）
   - 如果提示"无法验证开发者"，去"系统偏好设置 -> 安全性与隐私"允许

---

## 🎯 推荐流程

**如果你只需要Windows exe:**

1. ✅ **最简单**: 使用GitHub Actions（不需要Windows电脑）
2. ⭐ **次选**: 找一台Windows电脑运行 `build_windows.bat`
3. 💰 **备选**: 租用Windows云服务器打包

**如果你需要多平台版本:**

- 🚀 **强烈推荐**: GitHub Actions（一次打包，获得Windows和macOS两个版本）

---

## 📝 常见问题

### Q: 打包后的exe文件很大？
A: 正常现象。包含了Python解释器、PyQt6、PyTorch等所有依赖，通常200-500MB。

### Q: 打包后运行报错？
A: 检查是否包含了模型文件 `yolov8n-pose.pt`，可以在打包命令中添加 `--add-data`。

### Q: macOS上能打包Windows exe吗？
A: 几乎不可能。必须使用GitHub Actions或Windows系统。

### Q: 打包需要多长时间？
A: 
- 本地打包: 5-10分钟
- GitHub Actions: 10-15分钟

---

## 🔗 相关资源

- [PyInstaller官方文档](https://pyinstaller.org/)
- [GitHub Actions文档](https://docs.github.com/actions)
- [PyQt6打包指南](https://www.pythonguis.com/tutorials/packaging-pyqt6-applications-pyinstaller/)

